<!doctype html>
<html lang="en">
  <head>
    <title>Strømpris</title>
    <style>
      body {
        margin: 0;
        font-family: Helvetica, Arial, sans-serif;
      }

      .error {
        color: red;
      }
      .topnav {
        overflow: hidden;
        background-color: #333;
      }

      .topnav a {
        float: left;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
      }

      .topnav a:hover {
        background-color: #69dadb;
        color: black;
      }

      .topnav a.active {
        background-color: #193498;
        color: white;
      }
    </style>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm//vega@5"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm//vega-lite@5.6.0"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm//vega-embed@6"
    ></script>
  </head>
  <body>
    <!-- Add Navigation Bar with links to docs (both FastAPI and your sphinx docs)
    -->

    <div id="vis"></div>
    <!-- Create Form -->
    <form action="javascript:refreshPlot()" id="price-form">
      <!--
      -->
      <label for="end">End Date:</label>
      <input type="date" id="end" name="end" value="2023-01-01" min="2022-01-01" max="2023-12-31">
      
      <label for="days">Number of Days:</label>
      <input type="number" id="days" name="days" value="7" min="1" max="30">
      
      <!-- Location checkboxes -->
      <div>
        <p>Select Locations:</p>
        <label><input type="checkbox" name="locations" value="NO1"> Oslo (NO1)</label>
        <label><input type="checkbox" name="locations" value="NO2"> Kristiansand (NO2)</label>
        <label><input type="checkbox" name="locations" value="NO3"> Trondheim (NO3)</label>
        <label><input type="checkbox" name="locations" value="NO4"> Tromsø (NO4)</label>
        <label><input type="checkbox" name="locations" value="NO5"> Bergen (NO5)</label>
        
      </div>
      
      <input type="submit" value="Update Chart">
    </form>
      <!-- Header Section -->
    <header>
      <h1>The price of electricity in Norway</h1>
      <p>Explore electricity pricing data across different cities in Norway. The data our visualization is based off of is gathered from hvakosterstrommen.no. <br> 
        To read more about how the data is sorted go to <a href="https://www.hvakosterstrommen.no/strompris-api">hvakosterstrommen.no/strompris-api </a>.</p>
    </header>

    <!-- Informative filler text -->
    <section>
      <h2>The rise in electricity prices and its effect on Norway</h2>
      <p>
        Electricity prices in Norway have been a topic of significant interest and concern in recent times. As a country known for its abundant natural resources and a strong commitment to renewable energy, Norway has traditionally enjoyed relatively stable and affordable electricity prices. However, recent fluctuations in the energy market, influenced by various global and local factors, have led to increased attention on the cost of electricity. Many households and businesses across the country have expressed concern over these changes, which can impact budgets and overall living costs.<br><br>
        Despite these challenges, it's important to remember that Norway's energy sector is robust and well-equipped to navigate through these fluctuations. The country's focus on sustainability and efficient energy usage continues to be a beacon of hope and innovation in the global energy landscape. To better understand the dynamics of electricity pricing in Norway, we encourage you to explore our visualization tool. This interactive platform provides a clear and detailed view of electricity prices across different cities and regions. By engaging with this data, users can gain valuable insights into pricing trends and patterns, helping them make more informed decisions and remain optimistic about the future of energy in Norway. Let this tool empower you with knowledge and perspective in a landscape that's ever-changing yet full of potential.
      </p>
    </section>

    <script type="text/javascript">
      async function refreshPlot() {
        // begin constructing URL to request the plot JSON
        const plotUrl = new URL(
          `${document.location.protocol}//${document.location.host}/plot_prices.json`,
        );

        // get inputs from the form

        // get selected location checkboxes
        for (checkbox of document.querySelectorAll("input[name=locations]")) {
          if (checkbox.checked) {
            plotUrl.searchParams.append("locations", checkbox.value);
          }
        }
        var endInput = document.querySelector('input[name="end"]');
        if (endInput) {
          plotUrl.searchParams.append("end", endInput.value);
        } else {
          console.warn('No input with name="end"');
        }

        var daysInput = document.querySelector('input[name="days"]');
        if (daysInput) {
          plotUrl.searchParams.append("days", daysInput.value);
        } else {
          console.warn('No input with name="days"');
        }

        console.log(`requesting new chart from ${plotUrl.href}`);
        var response = await fetch(plotUrl.href);
        var spec = await response.json();

        var embedOpt = { mode: "vega-lite" };

        function showError(el, error) {
          el.innerHTML =
            '<div class="error" style="color:red;">' +
            "<p>JavaScript Error: " +
            error.message +
            "</p>" +
            "<p>This usually means there's a typo in your chart specification. " +
            "See the javascript console for the full traceback.</p>" +
            "</div>";
          throw error;
        }
        const el = document.getElementById("vis");
        vegaEmbed("#vis", spec, embedOpt).catch((error) =>
          showError(el, error),
        );
      }
      refreshPlot();
    </script>
  </body>

</html>
